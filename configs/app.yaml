# Configuración de la aplicación OmniAPI
# Este archivo define la configuración del servidor HTTP, WebSockets,
# autenticación, quotas y políticas

# Configuración del servidor HTTP
http:
  host: '0.0.0.0'
  port: 3000
  read_timeout: 30s
  write_timeout: 30s
  cors:
    allowed_origins:
      - '*'
    allowed_methods:
      - 'GET'
      - 'POST'
      - 'PUT'
      - 'DELETE'
      - 'OPTIONS'
    allowed_headers:
      - '*'
    allow_credentials: true

# Configuración de WebSockets
websocket:
  read_buffer_size: 1024
  write_buffer_size: 1024
  write_wait: 10s
  pong_wait: 60s
  ping_period: 54s
  max_message_size: 512

# Configuración de autenticación
auth:
  jwt_secret:
    provider: 'env'
    key: 'JWT_SECRET'
  token_expiry: 24h
  refresh_expiry: 168h # 7 días
  issuer: 'omniapi'

# Quotas por defecto para nuevos tenants
quotas:
  default:
    - resource: 'api_calls_per_hour'
      limit: 1000
    - resource: 'storage_gb'
      limit: 10
    - resource: 'connections'
      limit: 5
    - resource: 'streams'
      limit: 50
    - resource: 'events_per_day'
      limit: 10000
    - resource: 'concurrent_connections'
      limit: 10

# Políticas del sistema
policies:
  # Rate limiting
  rate_limit:
    enabled: true
    requests_per_minute: 100
    burst_size: 10

  # Retención de datos
  data_retention:
    events: 720h # 30 días
    logs: 168h # 7 días
    metrics: 2160h # 90 días
